var klick_apv_send_command=function(a,e,t,n){n="undefined"==typeof n||n;var s={action:"klick_apv_ajax",subaction:a,nonce:klick_apv_ajax_nonce,data:e};jQuery.post(ajaxurl,s,function(a){if(n)try{var e=JSON.parse(a)}catch(s){return console.log(s),void console.log(a)}else var e=a;"undefined"!=typeof t&&t(e)})};jQuery(document).ready(function(a){klick_apv=klick_apv(klick_apv_send_command)});var klick_apv=function(a){function e(a){var e=p("#klick_apv_plugin_name").val();return c()===!1?(r(".klick-notice-message",klick_apv_admin.notice_for_slug_name),!1):"name="+e}function t(){p(".klick-apv-overlay").show();var e="reload=1";a("klick_apv_reload",e,function(a){p(".klick-apv-overlay").hide(),p(".apv-list-table").html(a.data)})}function n(){p("#klick_apv_plugin_name").val("")}function s(){p("#klick_apv_add_plugin").hide(),p(".apv-list-container").show(),p("#klick_apv_plugin_list").show()}function i(){p("#klick_apv_plugin_list").hide(),p(".apv-list-container").hide(),p("#klick_apv_add_plugin").show()}function l(a){var e=/^[a-zA-Z0-9-_]+$/;return a.search(e)==-1}function o(a){var e=""==a.length;return e}function r(a,e){return p(""+a).addClass("klick-notice-message notice notice-error is-dismissible"),p(""+a).html("<p>"+e+"</p>"),p(""+a).slideDown(),p("#klick_apv_plugin_save").attr("disabled","disabled"),!1}function c(){var a=p.trim(p("#klick_apv_plugin_name").val());return o(a)===!0?(r(".klick-notice-message",klick_apv_admin.empty_status_name),!1):l(a)===!0?(r(".klick-notice-message",klick_apv_admin.notice_for_slug_name),!1):(p(".klick-notice-message").slideUp(),!0)}var p=jQuery;p(".klick-apv-overlay").hide(),p("#klick_apv_add_plugin").hide(),p("#klick_apv_nav_tab_wrapper .nav-tab").click(function(a){a.preventDefault();var e=p(this).attr("id");if(e&&"klick_apv_nav_tab_"==e.substring(0,18)){var e=e.substring(18);p("#klick_apv_nav_tab_wrapper .nav-tab:not(#klick_apv_nav_tab_"+e+")").removeClass("nav-tab-active"),p(this).addClass("nav-tab-active"),p(".klick-apv-nav-tab-contents:not(#klick_apv_nav_tab_contents_"+e+")").hide(),p("#klick_apv_nav_tab_contents_"+e).show()}}),p("#klick_apv_plugin_add").click(function(a){a.preventDefault(),i(),n()}),p("#klick_apv_plugin_cancel").click(function(a){a.preventDefault(),p(".klick-notice-message").html(""),p(".klick-notice-message").css("display","none"),p(".klick-ajax-notice").html(""),p(".klick-ajax-notice").css("display","none"),s()}),p("#klick_apv_plugin_save").on("click",function(n){n.preventDefault();var i=p("#apv_command").val(),l=e(i),o=p("#klick_apv_plugin_name").val();return l!==!1&&void p.ajax({url:"https://wordpress.org/plugins/wp-json/plugins/v1/plugin/"+o,type:"GET",cache:!1,dataType:"json",success:function(e){var n="name="+e.name+"&slug="+e.slug;a("klick_apv_save_settings",n,function(a){1==a.status.status&&(t(),s(),p(".klick-ajax-message").html(a.status.messages),p(".klick-ajax-message").slideDown(),p(".fade").delay(2e3).slideUp(200,function(){})),2==a.status.status&&(p(".klick-ajax-message").html(a.status.messages),p(".klick-ajax-message").slideDown(),p(".fade").delay(1e4).slideUp(200,function(){}))})},error:function(a){return p(".klick-ajax-message").html('<div class="klick-ajax-notice updated fade"><p>'+klick_apv_admin.incorrect_slug_notice+"</p></div>"),p(".fade").delay(5e3).slideUp(200,function(){}),!1}})}),p(document).on("click",".klick-apv-delete-row",function(e){e.preventDefault(),p(".klick-apv-overlay").show();var n=p(this).attr("data-id"),s="name="+n;a("klick_apv_delete_row",s,function(a){a.status===!0&&t()})}),p("#klick_apv_plugin_name").keyup(function(){p("#klick_apv_plugin_save").attr("disabled",!1);var a=p.trim(p("#klick_apv_plugin_name").val());l(a)===!0?r(".klick-notice-message",klick_apv_admin.notice_for_slug_name):p(".klick-notice-message").slideUp()}),p(document).on("click",".details-link-close",function(){p(this).parent().parent().css("display","none")}),p(document).on("click",".details-link",function(){p(".overlay").css("display","none"),p(this).parent().next().css("display","block"),Chart.defaults.global.maintainAspectRatio=!1,Chart.defaults.global.scaleLabel="<%=parseInt(value).toLocaleString()%>";var a;a=p(this).attr("data-id");var e={},e={slug:a,l10n:{all_time:"All Time",date:"Date",downloads:"Downloads",noData:"No data yet",today:"Today",yesterday:"Yesterday",last_week:"Last Week"}};p("#"+a).find("#download_summary").html(""),p("#"+a).find("#details_summary").html(""),p(".download-loader").show(),p.ajax({url:"https://api.wordpress.org/stats/plugin/1.0/downloads.php?slug="+a+"&historical_summary=1&callback=?",type:"GET",cache:!1,dataType:"jsonp",success:function(e){p(".download-loader").hide(),p("#"+a).find("#download_summary").append("<span>Today : "+e.today+"</span>"),p("#"+a).find("#download_summary").append("<span>Yesterday : "+e.yesterday+"</span>"),p("#"+a).find("#download_summary").append("<span>Last_week : "+e.last_week+"</span>"),p("#"+a).find("#download_summary").append("<span>All_time : "+e.all_time+"</span>")}}),p.ajax({url:"https://wordpress.org/plugins/wp-json/plugins/v1/plugin/"+a,type:"GET",cache:!1,dataType:"json",success:function(e){p(".download-loader").hide();var t="";p("#"+a).find("#details_summary").append("<span>Active Installs : "+e.active_installs+"</span>"),p("#"+a).find("#details_summary").append("<span>Version : "+e.version+"</span>"),p("#"+a).find("#details_summary").append("<span>Last Updated : "+e.last_updated+"</span>"),p("#"+a).find("#details_summary").append("<span>Author : "+e.author+"</span>"),p("#"+a).find("#details_summary").append("<span>Requires WP version : "+e.requires+"</span>"),p("#"+a).find("#details_summary").append("<span>Tested up to : "+e.tested+"</span>");var n="",s="",i="",l="";p.each(e.tags,function(a,e){n+="<a href='https://wordpress.org/plugins/tags/"+e+"' target='_blank'>"+e+"</a>"}),p("#"+a).find("#details_summary").append("<span class='tags'>Tags : "+n+"</span>");var s=e.rating/20,o=["empty","empty","empty","empty","empty"];if(s>0&&s<=.5)var o=["half","empty","empty","empty","empty"];if(s>.5&&s<=1)var o=["filled","empty","empty","empty","empty"];if(s>1&&s<=1.5)var o=["filled","half","empty","empty","empty"];if(s>1.5&&s<=2)var o=["filled","filled","empty","empty","empty"];if(s>2&&s<=2.5)var o=["filled","filled","half","empty","empty"];if(s>2.5&&s<=3)var o=["filled","filled","filled","empty","empty"];if(s>3&&s<=3.5)var o=["filled","filled","filled","half","empty"];if(s>3.5&&s<=3)var o=["filled","filled","filled","filled","empty"];if(s>4&&s<=4.5)var o=["filled","filled","filled","filled","half"];if(s>4.5&&s<=5)var o=["filled","filled","filled","filled","filled"];var r=0;"empty"===o[0]&&(r=1),i+='<div class="rating">',i+='<div class="wporg-ratings" aria-label="5 out of 5 stars" data-title-template="'+s+' out of 5 stars" data-rating="4">',1===r?i+="<span>"+klick_apv_admin.rating_notice+"</span>":(i+='<span class="dashicons dashicons-star-'+o[0]+'"></span>',i+='<span class="dashicons dashicons-star-'+o[1]+'"></span>',i+='<span class="dashicons dashicons-star-'+o[2]+'"></span>',i+='<span class="dashicons dashicons-star-'+o[3]+'"></span>',i+='<span class="dashicons dashicons-star-'+o[4]+'"></span>'),i+="</div>",i+="</div>",p("#"+a).find("#rating").html(""),p("#"+a).find("#rating").append(""+i);var l=[];jQuery.each(e.ratings,function(a,e){l.push(e)}),l=l.reverse(),t="<ul class='ratings-list'>",p.each(l,function(e,n){var s=100*n/1e3;t+='<li class="counter-container">',t+='<a href="https://wordpress.org/support/plugin/'+a+"/reviews/?filter="+(5-e)+'" target="_blank">',t+='<span class="counter-label">'+(5-e)+" stars</span>",t+='<span class="counter-back">',t+='<span class="counter-bar" style="width: '+s+'%;"></span>',t+="</span>",t+='<span class="counter-count">'+n+"</span>",t+="</a>",t+="</li>"}),t+="</ul>",p("#"+a).find("#ratings").html(""),p("#"+a).find("#ratings").append(""+t);var c="";c+="<ul class='contributors-list' id='contributors_list'>",p.each(e.contributors,function(a,e){c+="<li>",c+='<img alt="" src="'+e.avatar+'" srcset="'+e.avatar+'" class="avatar avatar-32 photo" height="32" width="32">',c+='<a href="'+e.profile+'" target="_blank">'+e.display_name+"</a>",c+="</li>"}),c+="</ul>",p("#"+a).find("#contributors").html(""),p("#"+a).find("#contributors").append(""+c)}}),p.ajax({url:"https://api.wordpress.org/stats/plugin/1.0/downloads.php?slug="+a+"&limit=267&callback=?",type:"GET",cache:!1,dataType:"jsonp",success:function(e){var t=[],n=[],s=[],i=0,l=new Date,o=l.getMonth();o-=6,p.each(e,function(a,e){formattedKey=new Date(a);var n=formattedKey.getMonth();n>=o&&(n==o?i+=parseInt(e):(t.push(o),s.push(i),i=0,o+=1))});var r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];p.each(t,function(a,e){n.push(r[e+1])});var c=document.getElementById(""+a+"_myChart").getContext("2d");new Chart(c,{type:"line",data:{labels:n,datasets:[{label:"# of Downloads",data:s,borderWidth:2,borderColor:"#357edd",backgroundColor:"#357edd",fill:!1,pointRadius:1}]},options:{scales:{yAxes:[{ticks:{callback:function(a,e,t){return a.toLocaleString()},beginAtZero:!1}}]},tooltips:{enabled:!0}}})}}),google.charts.load("current",{packages:["corechart"]}),p.getJSON("https://api.wordpress.org/stats/plugin/1.0/?slug="+e.slug+"&callback=?",function(a){var t=document.getElementById(""+e.slug+"_plugin-version-stats");return 0===a.length?void p("#"+e.slug+"_plugin-version-stats").text(e.l10n.noData):void google.charts.setOnLoadCallback(function(){var e,n,s=[""],i=[""],l=[],o=0;p.each(a,function(a){l.push(a)}),l.sort(function(a,e){return a=a.split("."),e=e.split("."),a[0]!==e[0]?a[0]-e[0]:a[1]-e[1]}),"other"===l[l.length-1]&&l.unshift(l.pop()),l.forEach(function(e){s.push(e),i.push(a[e])}),e=google.visualization.arrayToDataTable([s,i]),n=new google.visualization.NumberFormat({fractionDigits:1,suffix:"%"}),p.each(i,function(a){i[a]&&n.format(e,++o)}),new google.visualization.BarChart(t).draw(e,{legend:{position:"bottom"},chartArea:{left:"0",width:"100%",height:"80%",top:"10%"},hAxis:{gridlines:{color:"transparent"}},isStacked:!0})})})})};